{% load static %}

{% if infotext and not infotext.is_empty %}
    <div id="{{ infotext.page }}" class="infobox callout callout-info callout-closable">
        <div class="callout-header d-flex">
            <span class="fas fa-circle-info callout-icon"></span>
            <span>{{ infotext.title }}</span>
            <button type="button" class="btn-close callout-closable-close ms-auto"
                    aria-label="Close"></button>
        </div>
        <div class="callout-content small">
            {# set infobox to hidden, if user closed it before #}
            <script>
                if (localStorage["infobox_{{ infotext.page }}"] === "hide")
                    document.querySelector("#{{ infotext.page }}").classList.add("closed");
            </script>
            {{ infotext.content|safe }}
        </div>
    </div>

    <script type="module">
        import {InfoboxLogic} from "{% static 'js/infobox.js' %}";

        new InfoboxLogic("{{ infotext.page }}").attach();
    </script>
{% endif %}
