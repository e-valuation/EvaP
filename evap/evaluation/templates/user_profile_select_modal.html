{% load evaluation_filters %}

<div class="modal fade" id="{{ modal_id }}" role="dialog" aria-labelledby="{{ modal_id }}Label" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form method="POST">
                <div class="modal-header">
                    <h5 class="modal-title" id="{{ modal_id }}Label">{{ title }}</h5>
                    <button role="button" class="close" data-dismiss="modal" aria-label="Close"><span class="fas fa-times"></span></a>
                </div>
                <div class="modal-body">
                    {{ question }}
                    {% include 'bootstrap_form.html' with form=form wide=True %}
                </div>
                <div class="modal-footer">
                    <button type="submit" id="btn-action" class="btn btn-{{ btn_type }}">{{ action_text }}</a>
                    <button type="button" class="btn btn-light" data-dismiss="modal" value="Submit">{% trans 'Cancel' %}</a>
                </div>
                {% csrf_token %}
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    function {{ modal_id }}Show(dataId, action) {
        // set form's action location
        $('#{{ modal_id }} form').attr('action', action);

        // show modal
        $('#{{ modal_id }}').modal();

        // fix incorrect select2 width calculation that occurrs because the select2 is applied while the modal is invisible
        $('#{{ modal_id }} span.select2').width("100%");
    }
</script>
