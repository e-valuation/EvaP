{% load evaluation_filters %}

{% if evaluation.is_single_result %}
    <div class="evaluation-period">
        {{ evaluation.vote_start_datetime|date:"Y-m-d" }}
    </div>
{% else %}
    <div class="evaluation-period">
        {{ evaluation.vote_start_datetime }}{% if not start_only %} &ndash;<br />
        {{ evaluation.vote_end_date }}{% endif %}<br />
    </div>
    <div class="evaluation-period-bar-container {% if state == 'new' or state == 'prepared' or state == 'editor_approved' or state == 'approved' %}{% if days_until_evaluation < 0 %}state-overdue{% elif days_until_evaluation <= 7 %}state-starting-soon{% else %}state-waiting{% endif %}{% elif state == 'in_evaluation' %}{% if days_left_for_evaluation <= 3 %}state-ending-soon{% else %}state-running{% endif %}{% elif state == 'evaluated' or state == 'reviewed' or state == 'published' %}state-done{% endif %}">
        <div class="bar">&nbsp;</div>
        <div class="overlay">
            <div class="icon icon-pause">
                <span class="fas fa-pause"></span>
            </div>
            <div class="text">
                {% if state == 'new' or state == 'prepared' or state == 'editor_approved' or state == 'approved' %}
                    {{ days_until_evaluation }}
                {% endif %}
            </div>
            <div class="icon icon-play">
                <span class="fas fa-play"></span>
            </div>
            <div class="text">
                {% if days_left_for_evaluation >= 0 and days_until_evaluation > 0 %}
                    {{ days_left_for_evaluation|subtract:days_until_evaluation }}
                {% elif days_left_for_evaluation >= 0 %}
                    {{ days_left_for_evaluation }}
                {% endif %}
            </div>
            <div class="icon icon-stop">
                <span class="fas fa-stop"></span>
            </div>
        </div>
    </div>
{% endif %}
