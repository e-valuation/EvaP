{% load cache %}
{% load i18n %}

{% load evaluation_filters %}
{% load results_templatetags %}

{% get_current_language as LANGUAGE_CODE %}

{% cache None course_result_template_fragment course.id LANGUAGE_CODE using="results" %}

<div class="results-grid-row heading-row course-row">
    <div data-col="name" data-order="{{ course.name|lower }}">
        <div>
            {% for degree in course.degrees.all %}
                <span class="badge badge-primary badge-degree">{{ degree }}</span>
            {% endfor %}
            <span class="badge badge-secondary badge-course-type">{{ course.type }}</span>
        </div>
        <span class="evaluation-name">{{ course.name }}</span>
    </div>
    <div data-col="semester" data-order="{{ course.semester.id }}" class="text-center semester-short-name">
        {{ course.semester.short_name }}
    </div>
    <div data-col="responsible" data-order="{{ course.responsibles.first.last_name|lower }}">
        {{ course.responsibles_names }}
    </div>
    <div data-col="result" data-order="{{ course.avg_grade }}">
        {% if course.not_all_evaluations_are_published %}
            <div class="d-flex" data-toggle="tooltip" data-placement="left" title="{% trans 'Course result is not yet available.' %}">
                {% include 'distribution_with_grade_disabled.html' with icon="fas fa-hourglass-half" %}
            </div>
        {% else %}
            {% include 'distribution_widget.html' with distribution=course.distribution average=course.avg_grade %}
        {% endif %}
    </div>
</div>

{% endcache %}
